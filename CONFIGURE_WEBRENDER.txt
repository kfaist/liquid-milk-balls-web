# PASTE THIS INTO TOUCHDESIGNER TEXTPORT (Alt+T)
# This will configure the WebRender TOP for local LiveKit input

# Find the WebRender TOP
wr = op('/webrender_livekit_input')
if wr is None:
    # Try other common names
    for name in ['webrender1', 'webrender_input', 'Web']:
        wr = op('/' + name)
        if wr is not None:
            break

if wr is not None:
    print(f"Found WebRender: {wr.path}")
    
    # Set URL to localhost (not Railway deployment)
    wr.par.url = 'http://localhost:3000/td-auto-viewer.html'
    print(f"URL set to: {wr.par.url.val}")
    
    # Enable Media Stream (critical for camera access!)
    if hasattr(wr.par, 'enablemediastream'):
        wr.par.enablemediastream = True
        print("Enable Media Stream: ON")
    
    # Make sure it's active
    wr.par.active = True
    print("Active: ON")
    
    # Reload the page
    wr.par.reload.pulse()
    print("Page reloaded!")
    
    print("\n=== CONFIGURATION COMPLETE ===")
    print("WebRender should now be loading td-auto-viewer.html from localhost")
    print("Open http://localhost:3000/publisher.html in browser to test")
else:
    print("ERROR: Could not find WebRender TOP!")
    print("Available TOPs at root:")
    for n in root.children:
        print(f"  {n.name} - {type(n)}")
